<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE>Error handling and debugging</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.4  (Win32)">
	<META NAME="AUTHOR" CONTENT="Roger">
	<META NAME="CREATED" CONTENT="20080818;20200000">
	<META NAME="CHANGED" CONTENT="20080818;20445046">
	<STYLE TYPE="text/css">
	<!--
		@page { size: 11in 11in; margin-right: 1.25in; margin-top: 1in; margin-bottom: 1in }
		P { margin-bottom: 0.08in; direction: ltr; color: #000000; widows: 2; orphans: 2 }
		P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
		P.cjk { font-family: "Times New Roman", serif; font-size: 12pt }
		P.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		H1 { margin-bottom: 0.04in; direction: ltr; color: #ff6600; widows: 2; orphans: 2 }
		H1.western { font-family: "Arial", sans-serif; font-size: 16pt; so-language: en-US }
		H1.cjk { font-family: "Times New Roman", serif; font-size: 16pt }
		H1.ctl { font-family: "Arial", sans-serif; font-size: 16pt; so-language: ar-SA }
		H2 { margin-bottom: 0.08in; direction: ltr; color: #ff6600; widows: 2; orphans: 2 }
		H2.western { font-family: "Arial", sans-serif; font-size: 14pt; so-language: en-US; font-style: italic; font-weight: medium }
		H2.cjk { font-family: "Times New Roman", serif; font-size: 14pt; font-style: italic; font-weight: medium }
		H2.ctl { font-family: "Arial", sans-serif; font-size: 14pt; so-language: ar-SA; font-style: italic; font-weight: medium }
		P.body-text-2-western { margin-left: 0.1in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
		P.body-text-2-cjk { margin-left: 0.1in; font-family: "Times New Roman", serif; font-size: 12pt }
		P.body-text-2-ctl { margin-left: 0.1in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		P.text-body-indent-western { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
		P.text-body-indent-cjk { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt }
		P.text-body-indent-ctl { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		A:link { color: #0000ff }
		A:visited { color: #800080 }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" TEXT="#000000" LINK="#0000ff" VLINK="#800080" DIR="LTR">
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=58*>
	<COL WIDTH=198*>
	<TR VALIGN=TOP>
		<TD WIDTH=23%>
			<P><BR><BR>
			</P>
			<P><A HREF="#1.Error Handling and Debugging|outline">Error
			Handling and Debugging</A></P>
			<P STYLE="margin-left: 0.17in"><A HREF="#1.1.Exceptions|outline">Exceptions</A></P>
			<P STYLE="margin-left: 0.17in"><A HREF="#1.2.Data Aborts|outline">Data
			Aborts</A></P>
			<P STYLE="margin-left: 0.17in"><A HREF="#1.3.Remote  Debugging|outline">Remote
			 Debugging</A></P>
		</TD>
		<TD WIDTH=77%>
			<H1 CLASS="western"><A NAME="Top"></A><A NAME="1.Error Handling and Debugging|outline"></A><A NAME="1.Error Handling and Debugging|outline"></A>
			Error Handling and Debugging</H1>
			<P CLASS="western">leJOS NXJ provides several features for error
			handling and debugging, including:</P>
			<UL>
				<LI><P CLASS="western">Exceptions</P>
				<LI><P CLASS="western">Data Aborts</P>
				<LI><P CLASS="western">Debugging</P>
			</UL>
			<P CLASS="western" STYLE="margin-left: 0.25in">The Remote
			Monitoring and Tracing facility, which is described in its own
			section below, can also be used for debugging.</P>
			<H2 CLASS="western"><A NAME="1.1.Exceptions|outline"></A>Exceptions</H2>
			<P CLASS="body-text-2-western">Most of the standard Java language
			exception classes are supported by leJOS, and user can create
			their own exception classes.</P>
			<P CLASS="body-text-2-western">Example:</P>
			<P CLASS="body-text-2-western">The following simplified version of
			the ExceptionTest example demonstrates what happens for an
			exception that is not caught &ndash; in this case an
			ArrayIndexOutOfBounds exception.</P>
			<P CLASS="body-text-2-western" STYLE="margin-left: 0in"><SPAN ID="Frame1" DIR="LTR" STYLE="float: left; width: 4.26in; height: 1.79in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>import</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">
				lejos.nxt.*;</FONT></FONT></FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<BR><BR>
				</P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>public</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>class</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">
				ExceptionTest {</FONT></FONT></FONT></P>
				<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>	</B></FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>public</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>static</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><B>void</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">
				main (String[] args)</FONT></FONT></FONT></P>
				<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">	{</FONT></FONT></P>
				<P CLASS="western" STYLE="margin-left: 1in; margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">		SensorPort
				p = SensorPort.</FONT></FONT></FONT><FONT COLOR="#0000c0"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><I>PORTS</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">[5];</FONT></FONT></FONT></P>
				<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">	}</FONT></FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">}</FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<H2 CLASS="western"><A NAME="1.2.Data Aborts|outline"></A>Data
			Aborts</H2>
			<P CLASS="body-text-2-western">If the leJOS firmware crashes you
			will normally a Data Abort. The screen shows the PC value where
			the failure occurred, and other details of the failure.</P>
			<P CLASS="body-text-2-western">The screen is something like:</P>
			<P CLASS="western"><SPAN ID="Frame2" DIR="LTR" STYLE="float: left; width: 2.2in; border: 1.00pt solid #000000; padding: 0.07in 0.12in; background: #ffffff">
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace">DATA ABORT</FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace">PC	00140BAC</FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace">AASR	1831BF01</FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace">ASR	00020601</FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace">OPCODE	???</FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in; margin-bottom: 0.02in">
				<FONT FACE="Courier New, monospace">DEBUG1	00020010</FONT></P>
				<P CLASS="western" STYLE="margin-top: 0.02in"><FONT FACE="Courier New, monospace">DEBUG2	00000000</FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="text-body-indent-western">The most common reason for
			data aborts is executing a file that is not a leJOS NXJ binary, or
			executing an incomplete leJOS NXJ file.</P>
			<P CLASS="text-body-indent-western">If you get a data abort in any
			other case, you should report trhe error to the leJOS development
			team by posting the details on the leJOS NXJ forums.</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><FONT COLOR="#0000ff"><U><A HREF="#Top">Back to
			top</A></U></FONT></P>
			<P CLASS="western"><BR><BR>
			</P>
			<H2 CLASS="western"><A NAME="1.3.Remote  Debugging|outline"></A>Remote
			 Debugging</H2>
			<P CLASS="body-text-2-western">You can use your PC as a remote
			console to display tracing statements generated your NXJ program. 
			 The lejos.nxt.comm.RConsole class has methods to it.  Since there
			are no instances of this class, all methods are static. 
			</P>
			<P CLASS="body-text-2-western">To start debugging, you use one of
			these methods:</P>
			<UL>
				<LI><P CLASS="western">void open()<BR>opens a USB connection with
				no timeout</P>
				<LI><P CLASS="western">void openUSB(int timeout)</P>
				<LI><P CLASS="western">void openBluetooth(int timeout)</P>
			</UL>
			<P CLASS="body-text-2-western">The NXT displays   USB Console..  <SPAN LANG="">
			</SPAN>or  BT Console..</P>
			<P CLASS="body-text-2-western">and  waits for the PC based monitor
			to connect.</P>
			<P CLASS="body-text-2-western">Then execute  the <I><B>nxjconsole
			</B></I>program on your PC.  When the connection is established,
			both the NXT and the PC display   Console open. 
			</P>
			<P CLASS="body-text-2-western">If you use the variant of open with
			a timeout, it waits the specified number of seconds and if the
			debug monitor has not connected, proceeds without debugging.   If
			the timeout is zero, it waits indefinitely. 
			</P>
			<P CLASS="body-text-2-western">You can also use the <FONT COLOR="#0000ff"><U><A HREF="../PC_GUI/PCGUITools.htm#_Toc202513556">ConsoleViewer</A></U></FONT>
			application to display the output.</P>
			<P CLASS="body-text-2-western">Debug statements can be output
			using one of the methods::</P>
			<UL>
				<LI><P CLASS="western">void println(String s)</P>
				<LI><P CLASS="western">void print(String s);l</P>
			</UL>
			<P CLASS="text-body-indent-western">If no successful open
			statement has been executed, the debug output is discarded. If
			there was a successful output, the string appears on standard out
			in the window or terminal that <I><B>nxjconsole </B></I> was run
			from, on the PC.</P>
			<P CLASS="text-body-indent-western">When debugging is completed,
			you should call:</P>
			<UL>
				<LI><P CLASS="western"> void close()</P>
			</UL>
			<P CLASS="body-text-2-western">This closes the USB or Bluetooth
			connection. 
			</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><FONT COLOR="#0000ff"><U><A HREF="#Top">Back to
			top</A></U></FONT></P>
			<P CLASS="western"><BR>
			</P>
		</TD>
	</TR>
</TABLE>
<P><A NAME="_Error_Handling_and_Debugging"></A><A NAME="_Exceptions"></A><A NAME="_Data_Aborts"></A><A NAME="_Remote__Debugging"></A>
<BR><BR>
</P>
</BODY>
</HTML>