<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<!-- CSS -->
		<link rel="stylesheet" href="../r_css/lejos-tutorial.css" type="text/css" />

		<!-- ICON -->
		<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />

		<TITLE>Communications</TITLE>
		<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.4  (Win32)">
		<META NAME="AUTHOR" CONTENT="Roger">
		<META NAME="CREATED" CONTENT="20080626;16090000">
		<META NAME="CHANGED" CONTENT="20080819;19584545">
		<STYLE TYPE="text/css">
		<!--
			@page { size: 11.5in 11in; margin-left: 0.79in; margin-right: 1.75in; margin-top: 1in; margin-bottom: 1in }
			TD P { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
			TD P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
			TD P.cjk { font-family: "Times New Roman", serif; font-size: 12pt; so-language: zxx }
			TD P.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
			H1 { margin-bottom: 0.04in; direction: ltr; color: #ff6600; text-align: left; widows: 2; orphans: 2 }
			H1.western { font-family: "Arial", sans-serif; font-size: 16pt; so-language: en-US }
			H1.cjk { font-family: "Times New Roman", serif; font-size: 16pt; so-language: zxx }
			H1.ctl { font-family: "Arial", sans-serif; font-size: 16pt; so-language: ar-SA }
			P { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
			P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
			P.cjk { font-family: "Times New Roman", serif; font-size: 12pt; so-language: zxx }
			P.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
			H2 { margin-bottom: 0.08in; direction: ltr; color: #ff6600; text-align: left; widows: 2; orphans: 2 }
			H2.western { font-family: "Arial", sans-serif; font-size: 14pt; so-language: en-US; font-style: italic; font-weight: medium }
			H2.cjk { font-family: "Times New Roman", serif; font-size: 14pt; so-language: zxx; font-style: italic; font-weight: medium }
			H2.ctl { font-family: "Arial", sans-serif; font-size: 14pt; so-language: ar-SA; font-style: italic; font-weight: medium }
			H3 { margin-left: 0.2in; margin-bottom: 0.08in; direction: ltr; color: #ff6600; text-align: left; widows: 2; orphans: 2 }
			H3.western { font-family: "Arial", sans-serif; font-size: 13pt; so-language: en-GB; font-style: normal; font-weight: medium }
			H3.cjk { font-family: "Times New Roman", serif; font-size: 13pt; so-language: zxx; font-style: normal; font-weight: medium }
			H3.ctl { font-family: "Arial", sans-serif; font-size: 13pt; so-language: ar-SA; font-style: normal; font-weight: medium }
			H4 { margin-left: 0.3in; margin-bottom: 0.04in; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
			H4.western { font-family: "Arial", sans-serif; so-language: en-GB; font-style: normal }
			H4.cjk { font-family: "Times New Roman", serif; so-language: zxx; font-style: normal }
			H4.ctl { font-family: "Arial", sans-serif; so-language: ar-SA; font-style: italic; font-weight: medium }
			P.body-text-2-western { margin-left: 0.1in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
			P.body-text-2-cjk { margin-left: 0.1in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: zxx }
			P.body-text-2-ctl { margin-left: 0.1in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
			P.body-text-3-western { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
			P.body-text-3-cjk { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: zxx }
			P.body-text-3-ctl { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 8pt; so-language: ar-SA }
			P.body-text-4-western { margin-left: 0.3in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
			P.body-text-4-cjk { margin-left: 0.3in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: zxx }
			P.body-text-4-ctl { margin-left: 0.3in; font-family: "Times New Roman", serif; font-size: 8pt; so-language: ar-SA }
			P.close-western { margin-top: 0.02in; margin-bottom: 0.02in; font-family: "Courier New", monospace; font-size: 10pt; so-language: en-US }
			P.close-cjk { margin-top: 0.02in; margin-bottom: 0.02in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: zxx }
			P.close-ctl { margin-top: 0.02in; margin-bottom: 0.02in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
			A:link { color: #0000ff }
			A:visited { color: #800080 }
		-->
		</STYLE>
	</head>
	<body>
		<a id="top" name="top"></a>
		<!-- N1: HEADER -->
		<table cellpadding="0" cellspacing="0" class="n1t1">
			<tr>
				<td><img src="../r_media/images/tutorial_header1.jpg" /></td>
				<td align="right"><img src="../r_media/images/tutorial_header2.jpg" /></td>
			</tr>
		</table>
		<!-- N2: CONTENTS -> NAVIGATION SYSTEMS AND CONTENTS -->
		<table cellpadding="0" cellspacing="0" class="n2t1">
			<tr>
				<td class="n2t1r1c1">
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Communications</U></FONT></A></P>
			<P CLASS="western" STYLE="margin-left: 0.33in"><A HREF="#1.0.1.Receiver|outline"><FONT COLOR="#0000ff"><U>Receiver</U></FONT></A></P>
			<P CLASS="western" STYLE="margin-left: 0.33in"><A HREF="#1.0.2.Streams|outline"><FONT COLOR="#0000ff"><U>Streams</U></FONT></A></P>
			<P CLASS="western" STYLE="margin-left: 0.33in"><FONT COLOR="#0000ff"><U><A HREF="#_NXT_Initiator__-__Bluetooth">NXT</A>
			<A HREF="#1.0.3.NXT Initiator  -  Bluetooth|outline">Initiator</A></U></FONT></P>
			<P CLASS="western" STYLE="margin-left: 0.33in"><A HREF="#1.0.4.PC Initiator |outline"><FONT COLOR="#0000ff"><U>PC
			Initiator</U></FONT></A></P>
			<P CLASS="western" STYLE="margin-left: 0.5in"><A HREF="#1.0.4.1.Bluetooth initiator|outline"><FONT COLOR="#0000ff"><U>Bluetooth
			initiator</U></FONT></A></P>
			<P CLASS="western" STYLE="margin-left: 0.5in"><FONT COLOR="#0000ff"><U><A HREF="#_USB_initiator">USB
			</A><A HREF="#1.0.4.2.USB initiator|outline">USB initiator</A></U></FONT></P>
			<P CLASS="western"><A HREF="#1.0.4.3.Using the NXTInfo object|outline"><FONT COLOR="#0000ff"><U>Using
			the NXTInfo object</U></FONT></A></P>
			<P CLASS="western" STYLE="text-indent: 0.25in"><FONT COLOR="#0000ff"><U><A HREF="#2.Advanced Communications|outline">Advanced
			</A><A HREF="#2.Advanced Communications|outline">Advanced
			Communications</A></U></FONT></P>
			<P CLASS="western" STYLE="text-indent: 0.25in"><A HREF="#2.1.Controlling a remote NXT|outline"><FONT COLOR="#0000ff"><U>Controlling
			a remote NXT</U></FONT></A></P>
			<P CLASS="western" STYLE="text-indent: 0.25in"><A HREF="#2.2.Communications External Bluetooth devices|outline"><FONT COLOR="#0000ff"><U>Communications
			External Bluetooth devices</U></FONT></A></P>
			<P CLASS="western" STYLE="text-indent: 0.25in"><A HREF="#2.3.Communicating with the RCX|outline"><FONT COLOR="#0000ff"><U>Communicating
			with the RCX</U></FONT></A></P>
				</td>
				<td>
		<!-- DO NOT MANINPULATE -->
        <div id="BreadCrumbs">
            <a href="../index.htm" target="_top">Home Page</a>
        &gt;
            <a href="#">Communications</a>

        </div>
        <div class="NavBit">
                <a target="_top" href="../ErrorHandlingAndDebugging/Error_handling_and_debugging.htm">«&nbsp;Previous</a>&nbsp;&#8226;&nbsp;<a href="../index.htm">TOC</a>&nbsp;&#8226;&nbsp;<a href="../PC_GUI/PCGUITools.htm">Next&nbsp;»</a>
        </div>
		<!-- CONTENT TITLE -->
        <div id="PageTitle">Communications</div>
		<A NAME="1.Communications|outline"></A>
			<P CLASS="western">NXJ supports communications, by Bluetooth and
			USB, The NXJ communications classes are designed so that most of
			your code is independent of whether you are using Bluetooth or USB
			&ndash; you can write applications that will use either one (See
			the example below.). And you can use Java streams, which are a
			very flexible and easy to use. 
			</P>
			<P CLASS="western">USB has the advantage of speed, but the cable
			can be used only to connect a NXT to a PC. Bluetooth is slower,
			but much flexible. It supports a multitude of methods of
			communicating NXT to NXT, PC to NXT, Mobile phone to NXT, NXT to
			remote Bluetooth device, etc. 
			</P>
			<P CLASS="western">The first step in communicating is to establish
			a connection. A connection has an initiator and a receiver. The
			receiver requests a connection from the initiator, and waits till
			it has been established. Then both ends of the connection can use
			it to supply input and output streams. The receiver program <B>only</B>
			runs on a NXT. The initiator program may run on a PC (always for
			USB) , a NXT, a mobile phone or another device that supports the
			Bluetooth Serial Port Profile (SPP).</P>
			<H3 LANG="en-GB" CLASS="western"><A NAME="1.0.1.Receiver|outline"></A>
			Receiver</H3>
			<P CLASS="western">The receiver program on the NXT requests a
			connection by calling the waitForConnection() method in the
			Bluetooth or USB class as :</P>
			<UL>
				<LI><P CLASS="western">BTConnection BTConnection
				waitForConnection();</P>
				<LI><P CLASS="western">USBConnection USBConnection
				waitForConnection();</P>
			</UL>
			<P CLASS="western" STYLE="margin-left: 0.25in">Even though the
			Bluetooth class returns a BTconnection object, and the USB class
			returns a USBConnection object, both of classes implement the
			NXTConnectiion interface.  So an object of either class can be
			assigned to an reference variable  that implements that interface.
						</P>
			<P CLASS="western">BlueTooth Example:</P>
			<P CLASS="close-western"><SPAN ID="Frame1" DIR="LTR" STYLE="float: left; width: 5.05in; height: 0.38in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>NXTConnection
				connection = Bluetooth.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>waitForConnection</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western">You need to ensure that Bluetooth power and
			visibility are on before calling this method. The leJOS NXJ
			start-up menu can be used to do this.</P>
			<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; widows: 0; orphans: 0">
			<FONT FACE="Times New Roman, serif"><FONT SIZE=3>USB Example:</FONT></FONT></P>
			<P CLASS="close-western"><SPAN ID="Frame2" DIR="LTR" STYLE="float: left; width: 4.64in; height: 0.38in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>NXTBConnection
				connection = USB.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>waitForConnection</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western">You need to ensure that the USB cable is
			connected before calling this method.</P>
			<P CLASS="western">Here is an example program that selects between
			USB and Bluetooth at run time:</P>
			<P CLASS="western"><SPAN ID="Frame3" DIR="LTR" STYLE="float: left; width: 6.87in; height: 5.56in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>import</B></FONT></FONT><FONT COLOR="#000000">
				lejos.nxt.*;</FONT></P>
				<P CLASS="close-western"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>import</B></FONT></FONT><FONT COLOR="#000000">
				lejos.nxt.comm.*;</FONT></P>
				<P CLASS="close-western"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>import</B></FONT></FONT><FONT COLOR="#000000">
				java.io.*;</FONT></P>
				<P CLASS="close-western">/**</P>
				<P CLASS="close-western">* sample of selecting channel at run
				time</P>
				<P CLASS="close-western">*/</P>
				<P CLASS="close-western"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>public</B></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>class</B></FONT></FONT><FONT COLOR="#000000">
				CommTest </FONT>
				</P>
				<P CLASS="close-western">{</P>
				<P CLASS="close-western" STYLE="margin-left: 0.41in"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>public</B></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>static</B></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>void</B></FONT></FONT><FONT COLOR="#000000">
				main( String[] args)</FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.41in">{ 
				</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000">LCD.drawString(</FONT><FONT COLOR="#0000ff">&quot;right
				BT&quot;</FONT><FONT COLOR="#000000">,0, 0);</FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000">NXTConnection
				connection = </FONT><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>null</B></FONT></FONT><FONT COLOR="#000000">;</FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>if</B></FONT></FONT><FONT COLOR="#000000">(
				4 == Button.waitForPress())</FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">{</P>
				<P CLASS="close-western" STYLE="margin-left: 1.2in"><FONT COLOR="#000000">LCD.drawString(</FONT><FONT COLOR="#0000ff">&quot;waiting
				for BT&quot;</FONT><FONT COLOR="#000000">, 0,1 );</FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.2in">connection =
				Bluetooth.waitForConnection();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>else</B></FONT></FONT><FONT COLOR="#000000">
				</FONT>
				</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">{</P>
				<P CLASS="close-western" STYLE="margin-left: 1.2in"><FONT COLOR="#000000">LCD.drawString(</FONT><FONT COLOR="#0000ff">&quot;waiting
				for USB&quot;</FONT><FONT COLOR="#000000">, 0,1 );</FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.2in">connection =
				USB.waitForConnection();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">DataOutputStream
				dataOut = connection.openDataOutputStream();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>try</B></FONT></FONT><FONT COLOR="#000000">
				{dataOut.writeInt(1234);} </FONT>
				</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#993300"><FONT FACE="Monospaced, Times New Roman, serif"><B>catch</B></FONT></FONT><FONT COLOR="#000000">
				(IOException e ) {System.out.println(</FONT><FONT COLOR="#0000ff">&quot;
				write error &quot;</FONT><FONT COLOR="#000000">+e);} </FONT>
				</P>
				<P CLASS="close-western" STYLE="margin-left: 0.41in">}</P>
				<P CLASS="close-western">}</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<H3 LANG="en-GB" CLASS="western"><A NAME="1.0.2.Streams|outline"></A>
			Streams</H3>
			<P CLASS="body-text-3-western">Once a connection has been
			established, streams can then be opened by calling  any of the 
			following methods in the NXTConnection interface:</P>
			<UL>
				<LI><P CLASS="western">InputStream openInputStream() throws
				IOException;</P>
				<LI><P CLASS="western">OutputStream openOutputStream() throws
				IOException;</P>
				<LI><P CLASS="western">DataInputStream openDataInputStream()
				throws IOException;  (the example above did this) 
				</P>
				<LI><P CLASS="western">DataOutputStream openDataOutputStream()
				throws IOException;</P>
			</UL>
			<P CLASS="body-text-3-western">Data items can then be read from
			the DataInputStream by:</P>
			<UL>
				<LI><P CLASS="western">int read(byte b[]) throws IOException 
				</P>
				<LI><P CLASS="western">int read(byte b[], int off, int len)
				throws IOException</P>
				<LI><P CLASS="western">boolean readBoolean() throws IOException</P>
				<LI><P CLASS="western">byte readByte() throws IOException</P>
				<LI><P CLASS="western">short readShort() throws IOException</P>
				<LI><P CLASS="western">readInt() throws IOException</P>
				<LI><P CLASS="western">char readChar() throws IOException</P>
				<LI><P CLASS="western">float readFloat() throws IOException</P>
				<LI><P CLASS="western">String readLine() throws IOException</P>
			</UL>
			<P CLASS="body-text-2-western"><B>Be aware: </B>The stream read
			methods are blocking &ndash; that is, they do not return until
			data is read. If your program has other tasks that need attending
			to while waiting for data, calls to the read methods should be
			made in a separate thread. 
			</P>
			<P CLASS="body-text-2-western"><BR><BR>
			</P>
			<P CLASS="body-text-2-western">Data can be written to the
			DataOutputStream by:</P>
			<UL>
				<LI><P CLASS="western">void write(byte b[], int off, int len)
				throws IOException</P>
				<LI><P CLASS="western">void writeBoolean(boolean v) throws
				IOException</P>
				<LI><P CLASS="western">void writeByte(int v) throws IOException</P>
				<LI><P CLASS="western">void writeShort(int v) throws IOException</P>
				<LI><P CLASS="western">void writeChar(int v) throws IOException</P>
				<LI><P CLASS="western">void writeInt(int v) throws IOException</P>
				<LI><P CLASS="western">void writeFloat(float v) throws
				IOException;</P>
				<LI><P CLASS="western">void writeChars (String value) throws
				IOException</P>
			</UL>
			<P CLASS="body-text-2-western">Example. of reading and writing
			integers using data streams (<FONT FACE="Courier New, monospace">dis
			a</FONT><FONT FACE="Times New Roman, serif">nd </FONT><FONT FACE="Courier New, monospace">
			dos a</FONT><FONT FACE="Times New Roman, serif">re  a
			DataInputStream and DataOutputStream  that has been opened)</FONT></P>
			<P CLASS="body-text-2-western"><SPAN ID="Frame4" DIR="LTR" STYLE="float: left; width: 3.88in; height: 1.49in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>for</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>int</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>i=0;i&lt;100;i++)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>int</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>n
				= dis.readInt();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawInt</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(n,7,0,1);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>refresh</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in">dos.writeInt(-n);</P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in">dos.flush();</P>
				<P CLASS="close-western">}</P>
				<P CLASS="close-western"><BR>
				</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-2-western"><B>Be aware: </B>you must flush the
			output stream to be sure the data is actually transmitted.
			Furthermore, it is possible for transmission to fail without
			throwing an exception. 
			</P>
			<P CLASS="body-text-2-western">The DataInputStream,
			DataOutputstream and NXTConnection can then be closed using the
			close() method.</P>
			<P CLASS="body-text-2-western"><BR><BR>
			</P>
			<P CLASS="body-text-2-western">The full example using BlueTooth
			is:</P>
			<P CLASS="close-western"><SPAN ID="Frame5" DIR="LTR" STYLE="float: left; width: 6.66in; height: 6.61in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>public</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>class</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>BTReceive
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western"><BR><BR>
				</P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>public</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>static</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>void</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>main(String
				[] args) </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>throws</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Exception
				</FONT></FONT></FONT>
				</P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in">{</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>String
				connected = </FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connected&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>;</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>String
				waiting = </FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Waiting...&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>;</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>String
				closing = </FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Closing...&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>;</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>while</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>true</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">{</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(waiting,0,0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>NXTConnection
				connection = Bluetooth.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>waitForConnection</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT>
								</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(connected,0,0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in">DataInputStream
				dis = connection.openDataInputStream();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in">DataOutputStream
				dos = connection.openDataOutputStream();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><BR><BR>
				</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>for</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>int</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>i=0;i&lt;100;i++)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.58in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>int</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>n
				= dis.readInt();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.58in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN LANG="fr-FR">LCD.</SPAN></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN LANG="fr-FR"><I>drawInt</I></SPAN></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN LANG="fr-FR">(n,7,0,1);</SPAN></FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.58in">dos.writeInt(-n);</P>
				<P CLASS="close-western" STYLE="margin-left: 1.58in">dos.flush();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in">dis.close();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in">dos.close();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(100);
				</FONT></FONT></FONT><FONT COLOR="#3f7f5f"><FONT FACE="Courier New, monospace"><FONT SIZE=2>//
				wait for data to drain</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(closing,0,0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in">btc.close();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.18in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.42in">}</P>
				<P CLASS="close-western">}</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-2-western">To modify this example to work with
			USB, you only have to change Bluetooth.waitforconnection() to
			USB.waitForconnectkon()</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><BR><BR>
			</P>
			<H3 LANG="en-GB" CLASS="western">NXT Initiator - Bluetooth</H3>
			<P CLASS="body-text-2-western"><BR><BR>
			</P>
			<P CLASS="body-text-3-western">To initiate a Bluetooth connection
			from one NXT to another NXT, you first need to add the receiver
			NXT to the initiator NXT&rsquo;s Bluetooth devices.</P>
			<P CLASS="body-text-3-western">To do this, you go to the Bluetooth
			menu in the leJOS NXJ start-up menu and select &ldquo;Search&rdquo;.
			Providing the Bluetooth power is on and visibility is on for the
			receiving NXT, it will be found and you can select &ldquo;Add&rdquo;
			to add it to the initiator&rsquo;s Bluetooth devices.</P>
			<P CLASS="body-text-3-western">To check it is in the Devices list,
			you can select &ldquo;Devices&rdquo; from the Bluetooth menu of
			the initiator NXT.</P>
			<P CLASS="body-text-3-western">You can then create a
			BTRemoteDevice class on the initiator NXT:</P>
			<P CLASS="body-text-3-western">Example:</P>
			<P CLASS="close-western"><SPAN ID="Frame6" DIR="LTR" STYLE="float: left; width: 5.59in; height: 0.45in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western">BTRemoteDevice btrd =
				Bluetooth.getKnownDevice(name);</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-3-western">You can connect to the remote
			device by its address, which you can get by:</P>
			<UL>
				<LI><P CLASS="western">public byte[] getDeviceAddr()</P>
			</UL>
			<P CLASS="body-text-3-western"><BR><BR>
			</P>
			<P CLASS="body-text-3-western">You can then connect to the remote
			device by calling one of the connect() methods in the Bluetooth
			class:</P>
			<UL>
				<LI><P CLASS="western">BTConnection connect(BTRemoteDevice
				remoteDevice)</P>
			</UL>
			<UL>
				<LI><P CLASS="western">BTConnection connect(byte[] device_addr)</P>
				<LI><P CLASS="western">BTConnection connect(byte[] device_addr,
				byte[] pin)</P>
			</UL>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western">Example:</P>
			<P CLASS="close-western"><SPAN ID="Frame7" DIR="LTR" STYLE="float: left; width: 5.21in; height: 2.85in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>BTRemoteDevice
				btrd = Bluetooth.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>getKnownDevice</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(name);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><BR><BR>
				</P>
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>if</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btrd
				== </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.51in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.51in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;No
				such device&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.51in">Button.waitForPress();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.51in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western">}</P>
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>BTConnection
				btc = Bluetooth.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>connect</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btrd);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>if</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btc
				== </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.5in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.5in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connect
				fail&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.5in">Button.waitForPress();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.5in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western">}</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-3-western">Having got a BTconnection object
			you can open the data input and output streams and read data as in
			the receiver example above.</P>
			<P CLASS="body-text-3-western">The complete BTConnectTest example,
			which works as the initiator program for the BTReceive receiver
			program, is:</P>
			<P CLASS="western"><SPAN ID="Frame8" DIR="LTR" STYLE="float: left; width: 5.79in; height: 9.26in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>public</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>class</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>BTConnectTest
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.43in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>public</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>static</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>void</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>main(String[]
				args) </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>throws</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Exception
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>String
				name = </FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;NXT&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>;</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>drawString</FONT></FONT></FONT></I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT></FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connecting...&quot;</FONT></FONT></FONT></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>BTRemoteDevice
				btrd = Bluetooth.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>getKnownDevice</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(name);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>if</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btrd
				== </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.19in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.19in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;No
				such device&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.19in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.19in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>BTConnection
				btc = Bluetooth.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>connect</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btrd);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>if</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btc
				== </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.08in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.08in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connect
				fail&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.08in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.08in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connected&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">DataInputStream
				dis = btc.openDataInputStream();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">DataOutputStream
				dos = btc.openDataOutputStream();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>for</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>int</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>i=0;i&lt;100;i++)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.13in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>try</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawInt</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(i*30000,
				8, 0, 2);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>refresh</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in">dos.writeInt(i*30000);</P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in">dos.flush();
								</P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>}
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>catch</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(IOException
				ioe) {</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Write
				Exception&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.46in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>refresh</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.13in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 1.13in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>try</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.33in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawInt</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(dis.readInt(),8,
				0,3);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.33in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>}
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>catch</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(IOException
				ioe) {</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.33in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Read
				Exception &quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.13in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>try</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.25in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Closing...
				&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.25in">dis.close();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.25in">dos.close();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.25in">btc.close();</P>
				<P CLASS="close-western" STYLE="margin-left: 1.25in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>}
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>catch</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(IOException
				ioe) {</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 1.25in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Close
				Exception&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">}</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Finished&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,3,
				4);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">Button.waitForPress();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.43in">}</P>
				<P CLASS="close-western">}</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western" STYLE="text-indent: 0.2in"><A HREF="#_Communications"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<P CLASS="western"><BR><BR>
			</P>
			<H3 LANG="en-GB" CLASS="western"><A NAME="1.0.4.PC Initiator |outline"></A>
			PC Initiator 
			</H3>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="body-text-3-western">A PC program can initiate a
			connection to a NXT and open a Java data stream.</P>
			<P CLASS="body-text-3-western">The API on the PC is different to
			the NXT API. See pcapidocs.</P>
			<P CLASS="body-text-3-western">To connect to the NXT, you need a
			NXTComm object that can be obtained using the NXTCommFactory
			class:</P>
			<UL>
				<LI><P CLASS="western">public static NXTComm createNXTComm(int
				protocol)</P>
			</UL>
			<H4 LANG="en-GB" CLASS="western"><A NAME="1.0.4.1.Bluetooth initiator|outline"></A>
			Bluetooth initiator</H4>
			<P CLASS="body-text-4-western">Bluetooth Example:</P>
			<P CLASS="western"><SPAN ID="Frame9" DIR="LTR" STYLE="float: left; width: 5.7in; height: 0.26in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">NXTComm
				nxtComm = NXTCommFactory.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><I>createNXTComm</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">(NXTCommFactory.</FONT></FONT></FONT><FONT COLOR="#0000c0"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><I>BLUETOOTH</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">);</FONT></FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-4-western">The reason for using a factory
			method is that there are several implementations of comms drivers
			for Bluetooth and USB on the PC and the one that is used depends
			on what operating system you are using and the contents of he
			nxj.properties file.</P>
			<P CLASS="body-text-4-western">You can connect to the NXT by
			address or by do a Bluetooth inquiry:</P>
			<P CLASS="body-text-4-western">To connect by address, you create a
			NXTInfo object using the constructor:</P>
			<UL>
				<LI><P CLASS="western">public NXTInfo(String name, String
				address)</P>
			</UL>
			<P CLASS="body-text-4-western">Example:</P>
			<P CLASS="western"><SPAN ID="Frame10" DIR="LTR" STYLE="float: left; width: 5.05in; height: 0.45in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western">NXTInfo nxtInfo = new NXTInfo(&ldquo;NXT&rdquo;,
				&ldquo;00:16:53:00:78:48&rdquo;);</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-4-western">To find the available NXTs doing a
			Bluetooth inquiry, you do:</P>
			<UL>
				<LI><P CLASS="western">NXTInfo[] nxtInfo = nxtComm.search(&ldquo;NXT&rdquo;,
				NXTCommFactory.BLUETOOTH);</P>
			</UL>
			<P CLASS="body-text-4-western"><BR><BR>
			</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="body-text-4-western"><BR><BR>
			</P>
			<H4 LANG="en-GB" CLASS="western"><A NAME="1.0.4.2.USB initiator|outline"></A>
			USB initiator</H4>
			<P CLASS="body-text-4-western">The initiator sequence using USB is
			almost the same as for Bluetooth; You just have to use USB instead
			of Bluetooth.in your code. While USB cannot use a device address ,
			but you can use the NXT name. 
			</P>
			<P CLASS="western"><SPAN ID="Frame11" DIR="LTR" STYLE="float: left; width: 6.14in; height: 0.26in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">NXTComm
				nxtComm = NXTCommFactory.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><I>createNXTComm</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">(NXTCommFactory.</FONT></FONT></FONT><FONT COLOR="#0000c0"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt"><I>USB</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">);</FONT></FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-4-western">To find the available NXT , you do:</P>
			<UL>
				<LI><P CLASS="western">NXTInfo[] nxtInfo =
				nxtComm.search(&ldquo;MYNXT&rdquo;, NXTCommFactory.BLUETOOTH);</P>
			</UL>
			<P CLASS="body-text-4-western">If there is only one NXT connected,
			you can use a null name parameter in the search() method. 
			</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><BR><BR>
			</P>
			<H4 LANG="en-GB" CLASS="western"><A NAME="1.0.4.3.Using the NXTInfo object|outline"></A>
			Using the NXTInfo object</H4>
			<P CLASS="body-text-4-western">Once you have a NXTInfo object, you
			can call the open() method of the NXTComm object to connect to the
			NXT:</P>
			<UL>
				<LI><P CLASS="western">public boolean open(NXTInfo nxt) throws
				NXTCommException;</P>
			</UL>
			<P CLASS="body-text-4-western">Once the NXT is open, you can
			obtain an InputStream and an OutputSttream, by calling the
			getInputStream() anf getOutputStream() methods of the NXTComm
			object:</P>
			<UL>
				<LI><P CLASS="western">public OutputStream getOutputStream();</P>
				<LI><P CLASS="western">public InputStream getInputStream();</P>
			</UL>
			<P CLASS="body-text-4-western">From these you can construct a
			DataInputStream and a DataOutputStream and send data to the
			receiving NXT.</P>
			<P CLASS="body-text-4-western"><BR><BR>
			</P>
			<P CLASS="body-text-4-western">The complete BTSend sample is in
			the samples folder.</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<P CLASS="western"><BR><BR>
			</P>
			<H1 CLASS="western" STYLE="page-break-after: avoid"><A NAME="2.Advanced Communications|outline"></A><A NAME="2.Advanced Communications|outline"></A>
			Advanced Communications</H1>
			<H2 CLASS="western"><A NAME="2.1.Controlling a remote NXT|outline"></A>
			Controlling a remote NXT</H2>
			<P CLASS="body-text-2-western">The RemoteNXT class allows one NXT
			running leJOS to control another, remote NXT, running leJOS or the
			standard LEGO firmware. It uses the LEGO Communications Protocol
			(LCP) over Bluetooth to control the remote NXT.</P>
			<P CLASS="body-text-2-western">Currently, the class is limited and
			I2C and RCX sensors are not supported, and the motors must be used
			in a simple way as the regulation thread is not used.</P>
			<P CLASS="body-text-2-western">To access a remote NXT, you use the
			constructor:</P>
			<UL>
				<LI><P CLASS="western">public RemoteNXT(String name) throws
				IOException</P>
			</UL>
			<P CLASS="body-text-2-western">Example: 
			</P>
			<P CLASS="close-western"><SPAN ID="Frame12" DIR="LTR" STYLE="float: left; width: 4.35in; height: 2.22in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>try</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connecting...&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,0,0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>nxt
				= </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>new</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>RemoteNXT(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;NXT&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connected&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,0,0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>}
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>catch</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(IOException
				ioe) {</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>clear</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>();</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Conn
				Failed&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,0,0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western">}</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-2-western">The name of the remote NXT must
			have already been added to the known devices of the initiating NXT
			by do a Bluetooth search followed by &ldquo;Add&rdquo; fron the
			leJOS NXJ Bluetooth menu.</P>
			<P CLASS="body-text-2-western">The constructor opens the
			connection and creates instances of the remote motor and sensor
			ports.</P>
			<P CLASS="body-text-2-western">It is then possible to get access
			to information about the remote NXT by using the methods:</P>
			<UL>
				<LI><P CLASS="western">public String getBrickName()</P>
				<LI><P CLASS="western">public String getBluetoothAddress()</P>
				<LI><P CLASS="western">public int getFlashMemory()</P>
				<LI><P CLASS="western">public String getFirmwareVersion()</P>
				<LI><P CLASS="western">public String getProtocolVersion()</P>
			</UL>
			<P CLASS="body-text-2-western">Example:</P>
			<P CLASS="western"><SPAN ID="Frame13" DIR="LTR" STYLE="float: left; width: 5.31in; height: 1.09in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(nxt.getBrickName(),
				0, 6);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(nxt.getFirmwareVersion(),
				0, 7);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(nxt.getProtocolVersion(),
				4, 7);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawInt</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(nxt.getFlashMemory(),
				6, 8, 7);</FONT></FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="body-text-2-western">There are also methods that act on
			the remote NXT:</P>
			<UL>
				<LI><P CLASS="western">public byte deleteFlashMemory()</P>
			</UL>
			<P CLASS="western">A remote Battery object is created that can be
			used to get the voltage of the remote battery using the normal
			Battery methods.</P>
			<P CLASS="western">Example:</P>
			<P CLASS="western"><SPAN ID="Frame14" DIR="LTR" STYLE="float: left; width: 6.25in; height: 0.46in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">LCD.</FONT></FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">drawString(
				&quot;Battery: &quot; + </FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">nxt.</FONT></FONT></FONT><FONT COLOR="#0000c0"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">Battery</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">.getVoltageMilliVolt()</FONT></FONT></FONT>
				<FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">0,4);</FONT></FONT></P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western">Objects are also created for the sensor ports
			of the remote NXT. These are accessed as S1, S2, S3 and S4.</P>
			<P CLASS="western">Local sensor objects can then be created using
			these ports and use exactly as if they were connected to a local
			sensor port.</P>
			<P CLASS="western">Example:</P>
			<P CLASS="western"><SPAN ID="Frame15" DIR="LTR" STYLE="float: left; width: 4.39in; height: 0.52in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western">LightSensor light = new
				LightSensor(nxt.S1);</P>
				<P CLASS="close-western">LCD.drawString(&quot;Light: &quot; +
				light.readValue(),0,5);</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western">Motor objects are created for the remote
			motors. They are named A, B and C.</P>
			<P CLASS="western">These can be used in the normal way, e.g: 
			</P>
			<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; widows: 0; orphans: 0">
			<SPAN ID="Frame16" DIR="LTR" STYLE="float: left; width: 2.51in; height: 1.06in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western">nxt.A.setSpeed(360);</P>
				<P CLASS="close-western">nxt.A.forward();</P>
				<P CLASS="close-western">nxt.A.stop();</P>
				<P CLASS="close-western">nxt.A.backward();</P>
			</SPAN><BR CLEAR=LEFT><BR>
			</P>
			<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
			<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<H2 CLASS="western"><A NAME="2.2.Communications External Bluetooth devices|outline"></A>
			<FONT COLOR="#ff6600"><FONT FACE="Arial, sans-serif"><FONT SIZE=3 STYLE="font-size: 13pt"><SPAN LANG="en-GB"><B>Communications</B></SPAN></FONT></FONT></FONT>
			External Bluetooth devices</H2>
			<P CLASS="western">The NXT can connect to external Bluetooth
			devices that implement the Serial Port Profile (SPP).</P>
			<P CLASS="western">Such devices can be searched for on the
			Bluetooth menu and added to the known devices.</P>
			<H3 LANG="en-GB" CLASS="western">GPS</H3>
			<P CLASS="western">leJOS supports external Bluetooth GPS receivers
			that support the NMEA protocol via the GPS and NMEASentence
			classes. NMEASentence is a utility class used by GPS, and is not
			directly accessed.</P>
			<P CLASS="western">One such device that has been tested with leJOS
			NXJ is the Holux M-1200.</P>
			<P CLASS="western">Most such devices have a PIN that is required
			to connect to them, but it may have a default value such as
			&ldquo;0000&rdquo;.</P>
			<P CLASS="western">To connect to a GPS device, you do:</P>
			<P CLASS="close-western"><SPAN ID="Frame17" DIR="LTR" STYLE="float: left; width: 5.89in; height: 5.58in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western">final byte[] pin = {(byte) '0', (byte)
				'0', (byte) '0', (byte) '0'};</P>
				<P CLASS="close-western">BTRemoteDevice btGPS =
				Bluetooth.getKnownDevice(name); 
				</P>
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>if</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btrd
				== </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)
				{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;No
				such device&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 0);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western">}</P>
				<P CLASS="close-western">btGPS =
				Bluetooth.connect(btrd.getDeviceAddr(), pin);</P>
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>if</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(btGPS
				== </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>)</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;No
				Connection&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 1);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>}
				</FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>else
				{</B></FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;Connected!&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 1);</FONT></FONT></FONT></P>
				<P CLASS="close-western">}</P>
				<P CLASS="close-western"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>GPS
				gps = </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>null</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>;</FONT></FONT></FONT></P>
				<P CLASS="close-western">InputStream in;</P>
				<P CLASS="close-western"><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>try</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>{</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in">in =
				btGPS.openInputStream();</P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>gps
				= </FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>new</B></FONT></FONT></FONT><FONT COLOR="#000000">
				</FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>GPS(in);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;GPS
				Online&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 6);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>}
				</FONT></FONT></FONT><FONT COLOR="#7f0055"><FONT FACE="Courier New, monospace"><FONT SIZE=2><B>catch</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(Exception
				e) {</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>LCD.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>drawString</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#2a00ff"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&quot;GPS
				Connect Fail&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>,
				0, 6);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Thread.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>sleep</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(2000);</FONT></FONT></FONT></P>
				<P CLASS="close-western" STYLE="margin-left: 0.79in"><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>System.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2><I>exit</I></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New, monospace"><FONT SIZE=2>(1);</FONT></FONT></FONT></P>
				<P CLASS="close-western">}</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western">As you see from this example, the GPS
			constructor takes the input stream from the Bluetooth connection
			as a parameter:</P>
			<UL>
				<LI><P CLASS="western">public GPS(InputStream in)</P>
			</UL>
			<P CLASS="western">It uses the NMEASentence class to process
			messages (known as sentences) from the Bluetooth device. Current
			only the $GPGGA sentence that gives the current latitude,
			longitude and altitude, is processed.</P>
			<P CLASS="western">To read the current values of latitude,
			longitude and altitude, you use the methods:</P>
			<UL>
				<LI><P CLASS="western">public float getLatitude()</P>
				<LI><P CLASS="western">public float getLongitude()</P>
				<LI><P CLASS="western">public float getAltitude()</P>
			</UL>
			<P CLASS="western">You can also get the time stamp corresponding
			to these values by:</P>
			<UL>
				<LI><P CLASS="western">public int getTime()</P>
			</UL>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<H2 CLASS="western"><A NAME="2.3.Communicating with the RCX|outline"></A>
			Communicating with the RCX</H2>
			<H3 LANG="en-GB" CLASS="western">RCXLink</H3>
			<P CLASS="western">IR communication with the RCX can be done using
			the Mindsensors NRLink RCX IR adapter. The software abstraction of
			this device is the RCXLink class. The constructor is:</P>
			<UL>
				<LI><P CLASS="western">public RCXLink(I2CPort port)</P>
			</UL>
			<P CLASS="western">For example: 
			</P>
			<P CLASS="western"><SPAN ID="Frame18" DIR="LTR" STYLE="float: left; width: 3.72in; height: 0.48in; border: 1px solid #000000; padding: 0.05in 0.1in; background: #ffffff">
				<P CLASS="close-western">RCXLink link = new
				RCXLink(SensorPort.S1);</P>
			</SPAN><BR CLEAR=LEFT><BR><BR>
			</P>
			<P CLASS="western">The NRLink-Nx supports a set of macros in ROM
			and EEPROM that can be used to send messages to the RCX using the
			LEGO RCX IR protocol. The EEPROM macos can be overwritten allowing
			the user to define their own macros.</P>
			<P CLASS="western">Macros can be run by:</P>
			<UL>
				<LI><P CLASS="western">public void runMacro(int addr)</P>
			</UL>
			<P CLASS="western">There are convenience methods for running the
			ROM macros:</P>
			<UL>
				<LI><P CLASS="western">public void beep()</P>
				<LI><P CLASS="western">public void runProgram(int programNumber)</P>
				<LI><P CLASS="western">public void forwardStep(int id)</P>
				<LI><P CLASS="western">public void backwardStep(int id)</P>
				<LI><P CLASS="western">public void setRCXRangeShort()</P>
				<LI><P CLASS="western">public void setRCXRangeLong()</P>
				<LI><P CLASS="western">public void powerOff()</P>
				<LI><P CLASS="western">public void stopAllPrograms()</P>
			</UL>
			<P CLASS="western">A new macro in the EEPROM address range can be
			defined by:</P>
			<UL>
				<LI><P CLASS="western">public void defineMacro(int addr, byte[]
				macro)</P>
			</UL>
			<P CLASS="western">There is a convenience method to define and run
			a macro:</P>
			<P CLASS="western"><BR><BR>
			</P>
			<P CLASS="western"><A HREF="#1.Communications|outline"><FONT COLOR="#0000ff"><U>Back
			to top</U></FONT></A></P>
			<P CLASS="western"><BR><BR>
			</P>
				

<!-- DO NOT TOUCH -->				
				<br/>
        <div class="NavBit">
                <a target="_top" href="../ErrorHandlingAndDebugging/Error_handling_and_debugging.htm">«&nbsp;Previous</a>&nbsp;&#8226;&nbsp;<a href="../index.htm">TOC</a>&nbsp;&#8226;&nbsp;<a href="../PC_GUI/PCGUITools.htm">Next&nbsp;»</a>
        </div>
		<br />
				<td>
			</tr>
		</table>
	</body>
</html>