<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		
  <title>Getting Started on OS&nbsp;X</title>
  <!-- CSS -->
  <link rel="stylesheet" href="../r_css/lejos-tutorial.css" type="text/css" /><!-- ICONO -->
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>
<a id="top" name="top"></a>
<!-- N1: HEADER -->
<table class="n1t1" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td><img src="../r_media/images/tutorial_header1.jpg" /></td>
      <td align="right"><img src="../r_media/images/tutorial_header2.jpg" /></td>
    </tr>
  </tbody>
</table>
<!-- N2: CONTENTS -> NAVIGATION SYSTEMS AND CONTENTS -->
<table class="n2t1" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td class="n2t1r1c1">
      <div class="nolinkLESSON">Getting Started on OS&nbsp;X</div>
      <div class="linkAHEAD"><a href="#1">Prerequisites</a></div>
      <div class="linkAHEAD2"><a href="#2">Java Development Kit</a></div>
      <div class="linkAHEAD2"><a href="#3">USB</a></div>
      <div class="linkAHEAD2"><a href="#4">Bluetooth</a></div>
      <div class="linkAHEAD"><a href="#7">Installing the software</a></div>
      <div class="linkAHEAD2"><a href="#8">Downloading the software</a></div>
      <div class="linkAHEAD2"><a href="#10">Setting up environment variables</a></div>
      <div class="linkAHEAD2"><a href="#12">Flashing the firmware</a></div>
      <div class="linkAHEAD"><a href="#13">Testing your Installation</a></div>
      </td>
      <td>
        <div id="BreadCrumbs">
            <a href="../index.htm" target="_top">Home Page</a>&gt;
            <a href="#">Getting Started on OS&nbsp;X</a>
        </div>
      <div class="NavBit"> <a target="_top" href="../Preliminaries/Intro.htm">&#171;&nbsp;Previous</a>&nbsp;&#8226;&nbsp;
      <a href="../index.htm">TOC</a>&nbsp;&#8226;&nbsp;<a href="../Preliminaries/FirstProgram.htm">Next&nbsp;&#187;</a> </div>
      <div id="PageTitle">Getting Started on OS&nbsp;X</div>
      <p>This version of the tutorial is for the 0.9 release of leJOS NXJ and is compatible with OS&nbsp;X 10.4 or higher and both intel and ppc processors.</p>
      
      <a id="1" name="1"></a>
      <h4>Prerequisites</h4>
      
      <a id="2" name="2"></a>
      <h5>Java Development Kit</h5>
      <p>You will also need a Java Development Kit (JDK). Note that a Java Runtime Environment
      (JRE) is not sufficient as it does not allow you to compile Java programs.
      A full JDK already ships with OS&nbsp;X or it can be installer on demand.
      Try the <code>java</code> and <code>javac</code> commands in the termainal to see
      whether a JDK is already installed. On OS&nbsp;X Lion, the commands will also show
      the instructions on how to installed the JDK provided by Apple.
      leJOS NXJ has been tested with JDK versions 1.5 and 1.6, and will not work with earlier
      versions. JDK 1.6 is recommended. At the time of writing, official builds of
      Java 1.7 are not available for OS&nbsp;X.</p>
      <p>Note that even if you have a 64-bit system, leJOS will always chose to run java in 32 Bit
      mode by automatically passing the <code>-d32</code> parameter to the <code>java</code>
      command whenever necessary.</p>
      
      <p> <a href="#top">Back to top</a> </p>

      <a id="3" name="3"></a>
      <h5>USB Driver</h5>     
      <p>To run leJOS NXJ on OS&nbsp;X you will need a suitable USB driver on your PC. 
      If you have installed the standard LEGO Mindstorms NXT-G software, a suitable driver (the so-called Fantom driver) is already installed. 
      If you do not wish to install the LEGO software on your PC or if you want to update the Fantom driver to the latest version,
      you can get an installer from <a href="http://mindstorms.lego.com/en-us/support/files/Driver.aspx" target="_blank">The LEGO Mindstorms site</a>.
      It is strongly recommended to update to the latest version (1.1.3 at the time of writing).</p>
      
      <!-- I believe these instructions are superseeded by the 1.1.3 driver
      <p>Intel macs require the OS&nbsp;X 10.5 firmware (fix) update. This is true for
      OS&nbsp;X 10.4 intel users as well. We have had several users report that this works
      (the 10.5 update installer actually checks if your OS&nbsp;X is version 10.3 or higher).
      PPC users need the 1.02 driver.</p> -->
      
      <a id="4" name="4"></a>
      <h5>(Optional) Bluetooth</h5> 
      <p>If you want to communicate with the NXT over Bluetooth, you will need a Linux supported
      Bluetooth dongle or built-in support on your PC. leJOS uses the Bluecove libraries which are
      included in the distribution. You can use leJOS NXJ without Bluetooth.</p>
      <p>Pairing the NXT with your Mac should be done by pair from the
      computer. Browse for the device and enter a passcode of 1234 on
      the mac.</p>
      
      <p> <a href="#top">Back to top</a> </p>
      
      <a name="7"></a>
      <h4>Installing leJOS</h4>
      
      <a name="8"></a>
      <h5>Downloading the software</h5> 
      <p>You can download the leJOS NXJ software from <a href="http://lejos.sourceforge.net/nxj-downloads.php"
      target="_blank">The leJOS NXJ download page</a>.</p>
      <p>The OS&nbsp;X edition of leJOS is distributed as a .tar.gz archive.
      Untar the archive to a location of your choice. You may delete the <em>build</em> subfolder,
      since it is required for Linux only.</p>
      
      <p> <a href="#top">Back to top</a> </p>
      
      <a name="10"></a>
      <h5>Setting up environment variables</h5>
      <p>leJOS NXJ needs to know the locations of java.exe and javac.exe. There are several possibilities
      to achieve that: (1) add the bin directory of the JDK to your <em>PATH</em> environment variable
      so that commands such as <code>java</code> and <code>javac</code> can be called from a command prompt
      or (2) set the <em>LEJOS_NXT_JAVA_HOME</em> environment variable to the directory of an installed JDK.
      Note that you can use <em>JAVA_HOME</em> instead of LEJOS_NXT_JAVA_HOME, however setting JAVA_HOME might
      intefere with other applications.</p>
      <p>Furthermore, the <em>NXJ_HOME</em> variable should be set to the directory where leJOS NXJ
      is installed. It allows other applications, e.g. the Ant scripts, to locate the leJOS
      Development Kit. Also, for easy exececution of the leJOS commands on the command line,
      the bin folder of the leJOS distribution should be added to the <em>PATH</em> variable.</p>
      <p>Examples:</p>
      <table border="1">
        <tbody>
          <tr>
            <td><b>Variable</b></td>
            <td><b>Value</b></td>
            <td><b>Example</b></td>
          </tr>
          <tr>
            <td>NXJ_HOME</td>
            <td>The folder you installed leJOS NXJ into</td>
            <td>/Users/me/leJOS_NXJ</td>
          </tr>
          <tr>
            <td>LEJOS_NXT_JAVA_HOME</td>
            <td>The folder where the JDK is installed</td>
            <td>/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home<br/>
            /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home
            </td>
          </tr>
          <tr>
            <td>PATH</td>
            <td>Add the bin folders for the JDK and leJOS</td>
            <td>$NXJ_HOME/bin:$PATH</td>
          </tr>
        </tbody>
      </table>
      <p>The bin directory for the JDK may already be on your PATH. In that case, it is unnecessary
      to set LEJOS_NXT_JAVA_HOME or JAVA_HOME, unless you want to have multiple JDKs on your system
      and want to select a specific JDK for use with leJOS.</p>
      <p>You can set these environment variables either as user or system variables depending 
      on whether you want leJOS NXJ to be available to just the current user or to all users.
      </p>
      
    <p>To set the environment variables for the current user only, create and edit
    <code>~/.profile</code>. The file should contain the following lines: 
    <pre class="CodeBox"><code>export NXJ_HOME="/Users/me/leJOS_NXJ"
export LEJOS_NXT_JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home"
export PATH="$NXJ_HOME/bin:$PATH"</code></pre>
      
    <p>To set the environment variables for all users, edit the file
    <code>/etc/profile</code>, and <b>add</b> the following lines:</p>    
    <pre class="CodeBox"><code>if [ $(whoami) != "root" ]; then
  export NXJ_HOME="/Applications/leJOS_NXJ"
  export LEJOS_NXT_JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home"
  export PATH="$NXJ_HOME/bin:$PATH"
fi</code></pre>
	<p>Note, that the above assumes that leJOS has been moved to
	<code>/Applications/leJOS_NXJ</code> so that it is available to all users.</p>
    
    <p> <a href="#top">Back to top</a> </p>
    
      <a name="12"></a>
      <h5>Flashing the Firmware</h5>
      <p>As leJOS NXJ is a firmware replacement, you will need to flash the firmware to your NXT. 
      Note that this will overwrite any existing firmware. If you have the standard LEGO firmware
      or other third-party firmware on your NXT, existing files will be lost.</p>
      
      <p>Note that the 0.9 release changes the amount of flash memory reserved for the firmware
      and the startup menu, so when you first flash the 0.9 firmware any existing files will be lost</p>
      
      <p>Make sure your NXT is attached to the PC via USB cable and switch it on by pressing the
      orange button. Open a command line prompt and either type the command <code>nxjflash</code>
      or <code>nxjflashg</code>. The latter starts the GUI version of nxjflash.</p> 
      
      <p>If you chose <code>nxjflash</code> to flash the leJOS NXJ firmware, you will see
      some messages on your command window.
      If the NXT brick is already in firmware update mode (it makes a ticking noise), then
      the firmware will be uploaded immediately. Otherwise, if your NXT has a previous version of
      the leJOS or LEGO firmware on it, a list of the NXTs connected to the USB will be shown 
      and you will be asked to input the number in the list of the NXT you want updated - this will
      be 1 if a single NXT is connected to your PC. After the flashing procedure has finished, you
      should see the leJOS logo on your NXT and hear the leJOS startup sound.
      If your NXT has other firmware on it, or if <code>nxjflash</code> fails, you must manually
      put your NXT into firmware update mode. Press the reset button (at the back of the NXT,
      hidden in the hole near the USB port) for more than 4 seconds. A straightened paper clip could
      be useful for this. Your NXT will audibly tick when it is firmware update mode. 
      Then try <code>nxjflash</code> again.</p>
      
      <p>If you chose <code>nxjflashg</code>, the GUI version of nxjflash will start.
      When the program window opens, click on Start Program and follow the instructions. 
      A more complete explanation is in the <a href="../PC_GUI/PCGUITools.htm">PC GUI Tools</a>
      tutorial page.</p>
      
      <a name="13"></a>
      <h4>Testing your Installation</h4>
      <p>You can test your installation by following the steps for writing your first leJOS Program
      which are the <a href="../Preliminaries/FirstProgram.htm">next part</a> of this tutorial.</p>
            
      <p> <a href="#top">Back to top</a> </p>
      
      <div class="NavBit"> <a target="_top" href="../Preliminaries/Intro.htm">&#171;&nbsp;Previous</a>&nbsp;&#8226;&nbsp;
      <a href="../index.htm">TOC</a>&nbsp;&#8226;&nbsp;<a href="../Preliminaries/FirstProgram.htm">Next&nbsp;&#187;</a> </div>
      <br />
      </td>
      <td> <br />
      </td>
    </tr>
  </tbody>
</table>
</body>
</html>